# installTAK-LXD Environment Configuration Template
# Copy this file to .env and fill in your actual values
# .env is in .gitignore and will NOT be committed to git

#######################################
# VPS CONFIGURATION
#######################################

# VPS connection details
VPS_HOST=104.225.221.119
VPS_USER=takadmin
VPS_SSH_PORT=22

# Domain configuration
DOMAIN_NAME=tak.pinenut.tech
WEB_DOMAIN=web.pinenut.tech
FILES_DOMAIN=files.pinenut.tech

# DNS Provider (for Let's Encrypt automation)
DNS_PROVIDER=cloudflare  # or: digitalocean, route53, etc.
DNS_EMAIL=your-email@example.com

#######################################
# LXD CONTAINER CONFIGURATION
#######################################

# Container naming
TAK_CONTAINER_NAME=tak
HAPROXY_CONTAINER_NAME=haproxy
NEXTCLOUD_CONTAINER_NAME=nextcloud

# Container network (typically auto-configured by LXD)
LXD_BRIDGE=lxdbr0
LXD_NETWORK=10.206.248.0/24

#######################################
# TAK SERVER FILE SOURCES
#######################################

# Choose your file distribution method: gdown or nextcloud
FILE_FETCH_METHOD=gdown  # Options: gdown, nextcloud

# GOOGLE DRIVE FILE IDs (if using gdown)
# Get these from shareable link: https://drive.google.com/file/d/ABC123xyz/view
# The ID is the part after /d/ and before /view
GDRIVE_TAKSERVER_ID=your-takserver-file-id-here
GDRIVE_GPG_KEY_ID=your-gpg-key-file-id-here
GDRIVE_DEB_POLICY_ID=your-deb-policy-file-id-here  # For Ubuntu deployments

# NEXTCLOUD WebDAV (if using nextcloud)
NC_URL=https://files.pinenut.tech
NC_USER=takadmin
NC_PASSWORD=your-nextcloud-app-password-here
NC_TAK_PATH=/TAK  # Path in NextCloud where TAK files are stored

#######################################
# CERTIFICATE CONFIGURATION
#######################################

# Certificate metadata
CERT_COUNTRY=US
CERT_STATE=Idaho
CERT_CITY=Idaho City
CERT_ORGANIZATION=Clear Creek VFD
CERT_ORGANIZATIONAL_UNIT=Communications
CERT_EMAIL=comms@clearcreekvfd.org

# Certificate Authority names
CA_NAME=CCVFD-ROOT-CA
INTERMEDIATE_CA_NAME=CCVFD-INTERMEDIATE-CA

# Certificate validity (in days)
CERT_VALIDITY_DAYS=730  # 2 years

# Certificate password (used for .p12 files)
# Default is 'atakatak' but you should change this
CERT_PASSWORD=atakatak

#######################################
# TAK SERVER CONFIGURATION
#######################################

# TAK Server version
TAK_VERSION=5.5-RELEASE

# TAK Server ports
TAK_CLIENT_PORT=8089      # ATAK/WinTAK/iTAK connections
TAK_WEB_PORT=8443         # Web UI
TAK_ENROLLMENT_PORT=8446  # Certificate enrollment
TAK_FEDERATION_PORT=9001  # Federation with other TAK Servers

# TAK Server features
ENABLE_ENROLLMENT=true
ENABLE_FEDERATION=false
ENABLE_QUIC=false  # QUIC protocol support (experimental)

# PostgreSQL database
POSTGRES_PASSWORD=changeme-secure-password-here
POSTGRES_DB=cot
POSTGRES_USER=martiuser

#######################################
# HAPROXY CONFIGURATION
#######################################

# HAProxy stats
HAPROXY_STATS_PORT=8404
HAPROXY_STATS_USER=admin
HAPROXY_STATS_PASSWORD=change-this-password

# HAProxy SSL/TLS
HAPROXY_SSL_MODE=passthrough  # Options: passthrough, termination

#######################################
# FIREWALL CONFIGURATION
#######################################

# Firewall type
FIREWALL_TYPE=ufw  # Options: ufw, iptables, firewalld

# Allow SSH from specific IP (leave empty for any)
SSH_ALLOWED_IP=  # Example: 192.168.1.0/24

#######################################
# BACKUP CONFIGURATION
#######################################

# Backup location
BACKUP_DIR=/opt/tak-backups
BACKUP_RETENTION_DAYS=30

# Backup schedule (cron format)
BACKUP_SCHEDULE="0 2 * * *"  # 2 AM daily

#######################################
# MONITORING & LOGGING
#######################################

# Log level
LOG_LEVEL=INFO  # Options: DEBUG, INFO, WARNING, ERROR

# Monitoring email (for alerts)
ALERT_EMAIL=your-email@example.com

#######################################
# DEPLOYMENT OPTIONS
#######################################

# Installation mode
INSTALL_MODE=manual  # Options: manual, automated

# Skip confirmation prompts (for automation)
AUTO_CONFIRM=false

# Debug mode (verbose output)
DEBUG_MODE=false

#######################################
# OPTIONAL: INTEGRATION SETTINGS
#######################################

# Slack webhook for notifications (optional)
SLACK_WEBHOOK_URL=

# Discord webhook for notifications (optional)
DISCORD_WEBHOOK_URL=

# Syslog server (optional)
SYSLOG_SERVER=
SYSLOG_PORT=514

#######################################
# NOTES
#######################################
# - Never commit .env to git!
# - Use strong passwords for production
# - Keep TAK Server files private (Google Drive/NextCloud)
# - Update CERT_PASSWORD from default 'atakatak'
# - Review TAK.gov documentation for latest recommendations
